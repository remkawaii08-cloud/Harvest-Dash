"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[662],{662:(e,t,n)=>{let i;n.d(t,{xh:()=>eb});class a extends Error{name="BaseError";cause;constructor(e,t={}){super(e,t.cause?{cause:t.cause}:void 0),this.cause=t.cause}}class r extends a{name="AddMiniApp.InvalidDomainManifest";constructor(){super("Invalid domain manifest")}}class o extends a{name="AddMiniApp.RejectedByUser";constructor(){super("Add miniapp rejected by user")}}class s extends a{name="SignIn.RejectedByUser";constructor(){super("Sign in rejected by user")}}class d extends a{name="SignManifest.RejectedByUser";constructor(){super("Sign manifest rejected by user")}}class c extends a{name="SignManifest.InvalidDomain";constructor(){super("Invalid domain provided")}}class l extends a{name="SignManifest.GenericError";constructor(e="Manifest signing failed"){super(e)}}var u=n(4879);let p=/[@#$%^&*+=/\\|~«»]/,m=/(!{2,}|\?{2,}|-{2,})/,v=/[\u{1F300}-\u{1F9FF}]|[\u{2702}-\u{27B0}]|[\u{2600}-\u{26FF}]|[\u{2B00}-\u{2BFF}]/u,f=({max:e,noSpaces:t}={})=>(t?u.Yj().max(e??1/0).regex(/^\S*$/,"Spaces are not allowed"):u.Yj().max(e??1/0)).refine(e=>!v.test(e),{message:"Emojis and symbols are not allowed"}).refine(e=>!p.test(e),{message:"Special characters (@, #, $, %, ^, &, *, +, =, /, \\, |, ~, \xab, \xbb) are not allowed"}).refine(e=>!m.test(e),{message:"Repeated punctuations (!!, ??, --) are not allowed"}),g=u.Yj().url().startsWith("https://",{message:"Must be an https url"}).max(1024).refine(e=>!e.includes(" "),{message:"URL must not contain spaces"}).refine(e=>{try{let t=new URL(e).hostname;if("localhost"===t||t.endsWith(".localhost")||/^(\d{1,3}\.){3}\d{1,3}$/.test(t)||t.startsWith("[")&&t.endsWith("]"))return!1;return!0}catch{return!1}},{message:"URL must not use IP addresses or localhost"}),w=u.Yj().max(32),h=u.Yj().max(32),b=u.Yj().regex(/^[-a-z0-9]{3,8}:[-_a-zA-Z0-9]{1,32}\/(?:[-a-z0-9]{3,8}:[-.%a-zA-Z0-9]{1,128}(?:\/[-.%a-zA-Z0-9]{1,78})?|native)$/,{message:"Invalid CAIP-19 asset ID"}),y=u.Yj().regex(/^#([0-9A-F]{3}|[0-9A-F]{6})$/i,{message:"Invalid hex color code. It should be in the format #RRGGBB or #RGB."}),k=u.Yj().max(1024).regex(/^(?!.*\.\.)([a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,{message:"Must be a valid domain name (e.g., example.com, sub.example.com)"}).refine(e=>!e.includes("://"),{message:"Domain must not include protocol (http://, https://, etc.)"}).refine(e=>!e.includes("/"),{message:"Domain must not include path separators"}).refine(e=>!e.includes("@"),{message:"Domain must not include @ symbol"}).refine(e=>!e.includes(":"),{message:"Domain must not include port numbers"}),E=u.KC([u.eu("1:1"),u.eu("3:2")]),A=u.Ik({header:u.Yj(),payload:u.Yj(),signature:u.Yj()});u.Ik({fid:u.ai(),type:u.eu("app_key"),key:u.Yj().startsWith("0x")});let x=u.Ik({type:u.eu("launch_frame"),name:w,url:g.optional(),splashImageUrl:g.optional(),splashBackgroundColor:y.optional()}),_=u.Ik({type:u.eu("launch_miniapp"),name:w,url:g.optional(),splashImageUrl:g.optional(),splashBackgroundColor:y.optional()}),C=u.Ik({type:u.eu("view_token"),token:b}),I=u.gM("type",[_,C,x]),j=u.Ik({title:h,action:I});u.Ik({version:u.KC([u.Yj(),u.ai()]).transform(e=>String(e)).pipe(u.KC([u.eu("next"),u.eu("1")])),imageUrl:g,aspectRatio:E.optional(),button:j});let L=u.Ik({url:u.Yj(),token:u.Yj()});u.Ik({notificationId:u.Yj().max(128),title:u.Yj().max(32),body:u.Yj().max(128),targetUrl:g,tokens:u.Yj().array().max(100)}),u.Ik({result:u.Ik({successfulTokens:u.YO(u.Yj()),invalidTokens:u.YO(u.Yj()),rateLimitedTokens:u.YO(u.Yj())})});let T=u.Ik({event:u.eu("miniapp_added"),notificationDetails:L.optional()}),M=u.Ik({event:u.eu("miniapp_removed")}),U=u.Ik({event:u.eu("notifications_enabled"),notificationDetails:L.required()}),S=u.Ik({event:u.eu("notifications_disabled")});u.gM("event",[T,M,U,S]);let P=u.k5(["games","social","finance","utility","productivity","health-fitness","news-media","music","shopping","education","developer-tools","entertainment","art-creativity"]),Y=u.KC([u.eu("0.0.0"),u.eu("0.0.1"),u.eu("1"),u.eu("next")]),D=f({max:30}),B=f({max:170}),R=u.YO(g).max(3),F=u.YO(f({max:20,noSpaces:!0})).max(5),N=f({max:30}),q=f({max:30}),O=f({max:100}),z=u.zM();function W(e){return Array.from(new Set(e))}let Z=u.YO(u.k5(["eip155:1","eip155:8453","eip155:42161","eip155:421614","eip155:84532","eip155:666666666","eip155:100","eip155:10","eip155:11155420","eip155:137","eip155:11155111","eip155:7777777","eip155:130","eip155:10143","eip155:42220","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp"])).transform(W),K=u.YO(u.k5(["wallet.getEthereumProvider","wallet.getSolanaProvider","actions.ready","actions.openUrl","actions.close","actions.setPrimaryButton","actions.addMiniApp","actions.signIn","actions.viewCast","actions.viewProfile","actions.composeCast","actions.viewToken","actions.sendToken","actions.swapToken","actions.openMiniApp","actions.requestCameraAndMicrophoneAccess","experimental.signManifest","haptics.impactOccurred","haptics.notificationOccurred","haptics.selectionChanged","back"])).transform(W),$=u.Ik({version:Y,name:w,iconUrl:g,homeUrl:g,imageUrl:g.optional(),buttonTitle:h.optional(),splashImageUrl:g.optional(),splashBackgroundColor:y.optional(),webhookUrl:g.optional(),subtitle:D.optional(),description:B.optional(),screenshotUrls:R.optional(),primaryCategory:P.optional(),tags:F.optional(),heroImageUrl:g.optional(),tagline:N.optional(),ogTitle:q.optional(),ogDescription:O.optional(),ogImageUrl:g.optional(),noindex:z.optional(),requiredChains:Z.optional(),requiredCapabilities:K.optional(),castShareUrl:g.optional(),canonicalDomain:k.optional()}).refine(e=>{if(void 0===e.castShareUrl)return!0;try{let t=new URL(e.homeUrl).hostname,n=new URL(e.castShareUrl).hostname;return t===n}catch{return!1}},{message:"castShareUrl must have the same domain as homeUrl",path:["castShareUrl"]});u.Ik({accountAssociation:A,miniapp:$.optional(),frame:$.optional()}).refine(e=>!e.frame||!e.miniapp||JSON.stringify(e.frame)===JSON.stringify(e.miniapp),{message:'If both "frame" and "miniapp" are provided, they must be identical',path:["frame","miniapp"]}).transform(e=>({...e,frame:e.frame??e.miniapp}));var G=n(5223),V=n(1029).Buffer;function J(e){return V.from(e.serialize({verifySignatures:!1})).toString("base64")}var H=n(9831),X=n(1701),Q=n(5455),ee=n(1863);let et="undefined"==typeof window?{postMessage(){},addEventListener:()=>{},removeEventListener:()=>{}}:window?.ReactNativeWebView?{postMessage:e=>{window.ReactNativeWebView.postMessage(JSON.stringify(e))},addEventListener:(e,t,...n)=>{document.addEventListener("FarcasterFrameCallback",t,...n)},removeEventListener:(e,t)=>{document.removeEventListener("FarcasterFrameCallback",t)}}:(0,ee.Ow)(window?.parent??window),en=(0,ee.LV)(et),ei=H.zj(),ea=X.y(),er=H.HT({...ei,async request(e){let t=ea.prepare(e);try{let e=await en.ethProviderRequestV2(t).then(e=>Q.qg(e,{request:t,raw:!0}));if(e.error)throw function({code:e,details:t}){switch(e){case 4001:return new H.vx;case 4100:return new H.D_;case 4200:return new H.NK;case 4900:return new H.Ce;case 4901:return new H.xq;default:return new H.Bh(e,t??"Unknown provider RPC error")}}(e.error);return e.result}catch(e){if(e instanceof Error&&e.message.match(/cannot read property 'apply'/i))return await en.ethProviderRequest(t);if(e instanceof H.Bh||e instanceof Q.Cf)throw e;throw new Q.Gd({message:e instanceof Error?e.message:void 0})}}});async function eo(){try{let e=await en.getCapabilities();if(!e.includes("wallet.getEthereumProvider")&&!e.includes("wallet.getEvmProvider"))return;return er}catch{return er}}function es(e){let t=new CustomEvent("eip6963:announceProvider",{detail:Object.freeze(e)});window.dispatchEvent(t);let n=()=>window.dispatchEvent(t);return window.addEventListener("eip6963:requestProvider",n),()=>window.removeEventListener("eip6963:requestProvider",n)}"undefined"!=typeof document&&(document.addEventListener("eip6963:requestProvider",()=>{en.eip6963RequestProvider()}),document.addEventListener("FarcasterFrameEthProviderEvent",e=>{if(e instanceof MessageEvent){let t=e.data;ei.emit(t.event,...t.params)}}),document.addEventListener("FarcasterFrameEvent",e=>{if(e instanceof MessageEvent){let t=e.data;"eip6963:announceProvider"===t.event&&es({info:t.info,provider:er})}})),"undefined"!=typeof window&&(window.addEventListener("eip6963:requestProvider",()=>{en.eip6963RequestProvider()}),window.addEventListener("message",e=>{if(e instanceof MessageEvent&&"frameEthProviderEvent"===e.data.type){let t=e.data;ei.emit(t.event,...t.params)}}),window.addEventListener("message",e=>{if(e instanceof MessageEvent&&"frameEvent"===e.data.type){let t=e.data.event;"eip6963:announceProvider"===t.event&&es({info:t.info,provider:er})}}));var ed=n(5384),ec=n(3388),el=n(677);let eu=(()=>{let e,t;async function n(t){let n=(0,ec.m)({origin:t.quickAuthServerOrigin}),{nonce:i}=await n.generateNonce(),a=await en.signIn({nonce:i,acceptAuthAddress:!0});if(a.result){let t=el.vY(a.result.message);if(!t.domain)throw Error("Missing domain on SIWE message");let i=await n.verifySiwf({domain:t.domain,message:a.result.message,signature:a.result.signature});return e={token:i.token,payload:(0,ed.i)(i.token)},i}if("rejected_by_user"===a.error.type)throw new s;throw Error("Unreachable")}return{get token(){if(e&&new Date(1e3*e.payload.exp)>new Date(Date.now()+15e3))return e.token;return},async getToken(i={}){let a=i.force??!1;return e&&!a&&new Date(1e3*e.payload.exp)>new Date(Date.now()+15e3)?{token:e.token}:(t||(t=n(i)),t.finally(()=>{t=void 0}),t)},async fetch(e,t){let{token:n}=await this.getToken(),i=new Headers(t?.headers);return i.set("Authorization",`Bearer ${n}`),fetch(e,{...t,headers:i})}}})();var ep=n(8463);let em=function(){let e=new ep.A;return{get eventNames(){return e.eventNames.bind(e)},get listenerCount(){return e.listenerCount.bind(e)},get listeners(){return e.listeners.bind(e)},addListener:e.addListener.bind(e),emit:e.emit.bind(e),off:e.off.bind(e),on:e.on.bind(e),once:e.once.bind(e),removeAllListeners:e.removeAllListeners.bind(e),removeListener:e.removeListener.bind(e)}}(),{solanaProviderRequest:ev}=en;async function ef(){let e;try{e=await en.getCapabilities()}catch{}if(e?.includes("wallet.getSolanaProvider"))return i}ev&&(i=(e=>({request:e,signMessage:t=>e({method:"signMessage",params:{message:t}}),signTransaction:t=>e({method:"signTransaction",params:{transaction:t}}),signAndSendTransaction:t=>e({method:"signAndSendTransaction",params:t})}))(function(e){return async t=>{if("connect"===t.method||"signMessage"===t.method)return await e(t);if("signAndSendTransaction"===t.method){let{transaction:n}=t.params,i={transaction:J(n)};return await e({method:"signAndSendTransaction",params:i})}if("signTransaction"===t.method){let{transaction:n}=t.params,i={transaction:J(n)},{signedTransaction:a}=await e({method:"signTransaction",params:i});return{signedTransaction:function(e){let t=V.from(e,"base64");return"legacy"===G.B2.deserializeMessageVersion(t)?G.Kt.deserialize(t):G.ZX.from(t)}(a)}}}}(ev)));let eg=null;async function ew(e=1e3){if(!0===eg)return!0;if("undefined"==typeof window||!window.ReactNativeWebView&&window===window.parent)return!1;let t=await Promise.race([en.context.then(e=>!!e),new Promise(t=>{setTimeout(()=>t(!1),e)})]).catch(()=>!1);return t&&(eg=!0),t}let eh=async()=>{let e=await en.addFrame();if(e.result)return e.result;if("invalid_domain_manifest"===e.error.type)throw new r;if("rejected_by_user"===e.error.type)throw new o;throw Error("Unreachable")},eb={...em,getCapabilities:en.getCapabilities,getChains:en.getChains,isInMiniApp:ew,context:en.context,back:(({miniAppHost:e,emitter:t})=>{let n,i=null;return{visible:!1,get onback(){return i},set onback(cb){i&&t.removeListener("backNavigationTriggered",i),i=cb,cb&&t.addListener("backNavigationTriggered",cb)},async show(){await e.updateBackState({visible:!0}),this.visible=!0},async hide(){await e.updateBackState({visible:!1}),this.visible=!1},async enableWebNavigation(){n=function({emitter:e,back:t}){let n=function(){if("undefined"!=typeof window&&void 0!==window.navigation)return window.navigation}();return n?function({emitter:e,back:t,navigation:n}){function i(){n.canGoBack?t.show():t.hide()}function a(){t.visible&&n.canGoBack&&n.back()}return n.addEventListener("navigatesuccess",i),e.addListener("backNavigationTriggered",a),()=>{n.removeEventListener("navigatesuccess",i),e.removeListener("backNavigationTriggered",a)}}({emitter:e,back:t,navigation:n}):"undefined"!=typeof window?function({emitter:e,back:t,window:n}){function i(){t.visible&&n.history.back()}return t.show(),e.addListener("backNavigationTriggered",i),()=>{e.removeListener("backNavigationTriggered",i)}}({emitter:e,back:t,window}):void 0}({back:this,emitter:t})},async disableWebNavigation(){n?.(),n=void 0}}})({miniAppHost:en,emitter:em}),quickAuth:eu,actions:{setPrimaryButton:en.setPrimaryButton.bind(en),ready:async(e={})=>await en.ready(e),close:en.close.bind(en),viewCast:en.viewCast.bind(en),viewProfile:en.viewProfile.bind(en),openMiniApp:en.openMiniApp.bind(en),signIn:async e=>{let t=await en.signIn({...e,acceptAuthAddress:e.acceptAuthAddress??!0});if(t.result)return t.result;if("rejected_by_user"===t.error.type)throw new s;throw Error("Unreachable")},openUrl:e=>{let t="string"==typeof e?e:e.url;return en.openUrl(t.trim())},addFrame:eh,addMiniApp:eh,composeCast:(e={})=>en.composeCast(e),viewToken:en.viewToken.bind(en),sendToken:en.sendToken.bind(en),swapToken:en.swapToken.bind(en),requestCameraAndMicrophoneAccess:en.requestCameraAndMicrophoneAccess.bind(en)},experimental:{getSolanaProvider:ef,signManifest:async e=>{let t=await en.signManifest(e);if(t.result)return t.result;if("rejected_by_user"===t.error.type)throw new d;if("invalid_domain"===t.error.type)throw new c;if("generic_error"===t.error.type)throw new l(t.error.message);throw Error("Unreachable")},quickAuth:e=>eu.getToken(e)},wallet:{ethProvider:er,getEthereumProvider:eo,getSolanaProvider:ef},haptics:{impactOccurred:en.impactOccurred.bind(en),notificationOccurred:en.notificationOccurred.bind(en),selectionChanged:en.selectionChanged.bind(en)}};"undefined"!=typeof document&&document.addEventListener("FarcasterFrameEvent",e=>{if(e instanceof MessageEvent){let t=e.data;"primary_button_clicked"===t.event?em.emit("primaryButtonClicked"):"miniapp_added"===t.event?em.emit("miniAppAdded",{notificationDetails:t.notificationDetails}):"miniapp_add_rejected"===t.event?em.emit("miniAppAddRejected",{reason:t.reason}):"miniapp_removed"===t.event?em.emit("miniAppRemoved"):"notifications_enabled"===t.event?em.emit("notificationsEnabled",{notificationDetails:t.notificationDetails}):"notifications_disabled"===t.event?em.emit("notificationsDisabled"):"back_navigation_triggered"===t.event&&em.emit("backNavigationTriggered")}}),"undefined"!=typeof window&&window.addEventListener("message",e=>{if(e instanceof MessageEvent&&"frameEvent"===e.data.type){let t=e.data.event;"primary_button_clicked"===t.event?em.emit("primaryButtonClicked"):"miniapp_added"===t.event?em.emit("miniAppAdded",{notificationDetails:t.notificationDetails}):"miniapp_add_rejected"===t.event?em.emit("miniAppAddRejected",{reason:t.reason}):"miniapp_removed"===t.event?em.emit("miniAppRemoved"):"notifications_enabled"===t.event?em.emit("notificationsEnabled",{notificationDetails:t.notificationDetails}):"notifications_disabled"===t.event?em.emit("notificationsDisabled"):"back_navigation_triggered"===t.event&&em.emit("backNavigationTriggered")}})}}]);