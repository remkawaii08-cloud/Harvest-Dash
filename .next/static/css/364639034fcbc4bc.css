@import url("https://fonts.googleapis.com/css2?family=VT323&display=swap");@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}.hay-bale-logo{animation:pulse 2s ease-in-out infinite}:root{--wood-dark:#3e2723;--wood-light:#5d4037;--cream:#ffffe0;--gold:#ffd700}*{-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent;box-sizing:border-box}*,body,html{-webkit-user-select:none;-moz-user-select:none;user-select:none}body,html{margin:0;padding:0;overflow:hidden;height:100%;width:100%;background-color:#87ceeb;font-family:VT323,monospace;color:var(--cream);position:fixed;top:0;left:0}canvas{display:block}#ui-container{top:0;left:0;width:100%;height:100%;pointer-events:none}#ui-container,.music-toggle{position:absolute;display:flex;justify-content:center;align-items:center}.music-toggle{top:20px;right:20px;width:50px;height:50px;background:#deb887;border:4px solid #8b4513;border-radius:10px;font-size:24px;cursor:pointer;box-shadow:0 4px 0 #5d2e0a;z-index:1001;transition:transform .1s,box-shadow .1s}.music-toggle:active{transform:translateY(2px);box-shadow:0 2px 0 #5d2e0a}.screen{background:var(--wood-light);padding:clamp(1rem,5vw,4rem);border:4px solid var(--wood-dark);box-shadow:5px 5px 0 rgba(0,0,0,.5);border-radius:4px;text-align:center;display:none;pointer-events:auto;opacity:0;transition:transform .3s ease,opacity .3s ease;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%) scale(.9);z-index:1000;max-width:90vw;max-height:90vh;overflow-y:auto;-webkit-overflow-scrolling:touch}.screen.active{display:block;opacity:1;transform:translate(-50%,-50%) scale(1)}h1{font-size:clamp(2rem,6vw,4rem);margin-bottom:.5rem;text-transform:uppercase;color:var(--gold);text-shadow:2px 2px 0 #000;letter-spacing:2px}.main-title{font-family:Arial Black,Gadget,sans-serif;font-size:clamp(3rem,12vw,6rem);color:#8bc34a;margin-top:0;margin-bottom:1rem;line-height:1;text-shadow:-3px -3px 0 #3e2723,3px -3px 0 #3e2723,-3px 3px 0 #3e2723,3px 3px 0 #3e2723,5px 5px 0 rgba(0,0,0,.5);animation:titlePulse 2s ease-in-out infinite}@keyframes titlePulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}p{font-size:clamp(1rem,3vw,1.5rem);margin-bottom:2rem;color:var(--cream);text-shadow:1px 1px 0 #000;word-wrap:break-word}button{background:var(--wood-dark);color:var(--gold);border:2px solid var(--gold);padding:clamp(8px,2vw,30px) clamp(20px,5vw,30px);font-size:clamp(1rem,3vw,2rem);font-family:VT323,monospace;cursor:pointer;transition:all .2s ease;box-shadow:2px 2px 0 rgba(0,0,0,.5);min-height:44px;min-width:44px;-webkit-appearance:none;-moz-appearance:none;appearance:none}button:hover{background:var(--gold);color:var(--wood-dark);transform:translateY(-2px);box-shadow:4px 4px 0 rgba(0,0,0,.5)}#hud{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:500}#hud.hidden{display:none}#distance-hud{position:absolute;top:calc(20px + env(safe-area-inset-top));left:50%;transform:translateX(-50%);font-family:VT323,monospace;font-size:2.5rem;color:#fff;text-shadow:2px 2px 0 #000;z-index:1000;background:rgba(0,0,0,.4);padding:5px 20px;border-radius:8px;border:2px solid rgba(255,255,255,.3);pointer-events:none;min-width:120px;text-align:center}.touch-zone{position:absolute;top:0;height:100%;width:50%;pointer-events:auto;z-index:10;-webkit-user-select:none;-moz-user-select:none;user-select:none}#touch-move-left{left:0}#touch-move-right{right:0}#quick-items-mobile{position:absolute;top:calc(120px + env(safe-area-inset-top));left:calc(20px + env(safe-area-inset-left));gap:15px;pointer-events:none;z-index:100}#quick-items-mobile,.quick-btn{display:flex;flex-direction:column}.quick-btn{width:clamp(50px,12vw,60px);height:clamp(50px,12vw,60px);background:rgba(0,0,0,.5);border:2px solid var(--gold);border-radius:12px;color:white;font-size:clamp(1rem,2vw,1.5rem);align-items:center;justify-content:center;pointer-events:auto;cursor:pointer;min-width:44px;min-height:44px;-webkit-appearance:none;-moz-appearance:none;appearance:none}.quick-btn .count{font-size:.8rem;margin-top:-5px}#gold-display{top:calc(20px + env(safe-area-inset-top));left:calc(20px + env(safe-area-inset-left));flex-direction:column;align-items:flex-start;pointer-events:none}#gold-display,.mobile-jump-btn{position:absolute;display:flex;z-index:100}.mobile-jump-btn{bottom:calc(20px + env(safe-area-inset-bottom));right:calc(20px + env(safe-area-inset-right));width:clamp(80px,18vw,100px);height:clamp(80px,18vw,100px);background:rgba(255,255,255,.2);border:3px solid rgba(255,255,255,.5);border-radius:50%;color:white;font-weight:700;font-size:clamp(.8rem,2.5vw,1.2rem);align-items:center;justify-content:center;pointer-events:auto;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none}.mobile-jump-btn:active{background:rgba(255,255,255,.4);transform:scale(.95)}.mobile-bag-btn{position:absolute;top:calc(80px + env(safe-area-inset-top));right:calc(20px + env(safe-area-inset-right));bottom:auto;width:clamp(50px,12vw,60px);height:clamp(50px,12vw,60px);background:rgba(0,0,0,.5);border:2px solid var(--gold);border-radius:12px;font-size:clamp(1.5rem,4vw,2.2rem);display:flex;align-items:center;justify-content:center;pointer-events:auto;z-index:600;cursor:pointer;min-width:44px;min-height:44px;-webkit-appearance:none;-moz-appearance:none;appearance:none}#bag-screen,#paused-screen{z-index:2000}#bag-btn{position:absolute;top:calc(80px + env(safe-area-inset-top));right:calc(20px + env(safe-area-inset-right));bottom:auto;width:clamp(50px,12vw,60px);height:clamp(50px,12vw,60px);font-size:clamp(1.5rem,4vw,2.5rem);background:var(--wood-light);border:4px solid var(--wood-dark);color:var(--gold);cursor:pointer;pointer-events:auto;z-index:1000;box-shadow:3px 3px 0 rgba(0,0,0,.5);display:flex;justify-content:center;align-items:center;border-radius:4px;min-width:44px;min-height:44px;-webkit-appearance:none;-moz-appearance:none;appearance:none}#bag-btn:hover{background:var(--gold);transform:scale(1.1)}.item-count{position:absolute;top:-10px;right:-10px;background:#ff0000;color:white;padding:2px 8px;border-radius:10px;font-size:1rem;border:2px solid white}.shop-items{display:flex;flex-wrap:wrap;gap:clamp(10px,3vw,20px);justify-content:center;margin-bottom:2rem}.item-btn{display:flex;flex-direction:column;align-items:center;padding:clamp(10px,3vw,20px);background:var(--wood-dark);border:2px solid var(--gold);color:var(--gold);flex:1 1;min-width:100px;min-height:80px}.item-btn:disabled{opacity:.5;cursor:not-allowed;border-color:#555;color:#888}.item-btn.owned{background:#006400;border-color:#0f0;color:#fff;pointer-events:none}.price{font-size:1.2rem;margin-top:5px;color:var(--cream)}.balance{color:var(--gold);font-size:clamp(1.2rem,4vw,2rem);margin-top:0;word-break:break-word}.shop-btn{margin-left:10px;background:var(--wood-light);border-color:var(--cream);color:var(--cream)}.shop-btn:hover{background:var(--cream);color:var(--wood-dark)}.coin-icon{background-color:#ffd700;border:2px solid #b8860b;border-radius:50%}.coin-icon,.jade-icon{width:20px;height:20px;display:inline-block;vertical-align:middle;margin-right:8px;box-shadow:inset -2px -2px 0 rgba(0,0,0,.2)}.jade-icon{background-color:#4caf50;border:2px solid #1b5e20;border-radius:4px}.shop-tabs{display:flex;justify-content:center;gap:10px;margin-bottom:20px}.tab-btn{font-size:clamp(1rem,2.5vw,1.5rem);padding:clamp(4px,1vw,20px) clamp(10px,3vw,20px);background:var(--wood-dark);color:#888;border:2px solid #444;min-height:44px;-webkit-appearance:none;-moz-appearance:none;appearance:none}.tab-btn.active{color:var(--gold);border-color:var(--gold);background:var(--wood-light)}.tab-content{display:none}.tab-content.active{display:block}.guide-scrollable{max-height:50vh;overflow-y:auto;text-align:left;padding:10px;background:rgba(0,0,0,.4);border-radius:8px;border:2px solid var(--wood-dark)}.guide-scrollable section{margin-bottom:20px}.guide-scrollable h2{font-size:1.8rem;margin-bottom:5px;text-shadow:1px 1px 0 #000}.guide-scrollable p{margin-bottom:10px;line-height:1.2}.guide-btn{background:#4a148c;border-color:#9c27b0}.mint-glow{animation:mintPulse 1s ease-out forwards}@keyframes mintPulse{0%{box-shadow:0 0 0 0 #fff;transform:scale(1)}50%{box-shadow:0 0 50px 20px #ffd700;transform:scale(1.1)}to{box-shadow:0 0 0 0 transparent;transform:scale(1)}}.menu-buttons{display:flex;flex-direction:column;gap:15px;align-items:center;margin-bottom:2rem}.menu-buttons button{width:clamp(150px,80vw,250px)}.start-gold-display{font-size:clamp(1rem,3vw,2rem);color:var(--gold);text-shadow:2px 2px 0 #000;background:rgba(0,0,0,.3);padding:clamp(5px,2vw,20px) clamp(10px,3vw,20px);border-radius:4px;display:inline-flex;flex-direction:column;align-items:center;gap:5px}.molten-border{position:relative;border-color:#ff4500!important;animation:moltenGlow 1.5s ease-in-out infinite alternate;overflow:visible}.molten-border:after{content:"";position:absolute;top:-6px;left:-6px;right:-6px;bottom:-6px;border:4px solid #ff8c00;border-radius:4px;z-index:-1;animation:fireFlicker .4s infinite alternate;pointer-events:none}@keyframes moltenGlow{0%{box-shadow:0 0 5px #4b0000,inset 0 0 5px #ff4500}to{box-shadow:0 0 20px #ff4500,inset 0 0 15px #ff8c00}}@keyframes fireFlicker{0%{transform:scale(1.01);opacity:.8;border-color:#ff4500}to{transform:scale(1.05);opacity:1;border-color:#ffff00}}.quest-item{background:rgba(0,0,0,.4);padding:15px;margin-bottom:15px;border-radius:8px;border:2px solid #555;text-align:left}.quest-item.completed{border-color:#8bc34a}.quest-title{font-size:1.4rem;color:#ffd700;margin-bottom:5px}.progress-container{width:100%;height:20px;background:#222;border-radius:10px;overflow:hidden;margin:10px 0;border:1px solid #444}.progress-fill{height:100%;background:linear-gradient(90deg,#4caf50,#8bc34a);width:0;transition:width .3s ease}.quest-footer{display:flex;justify-content:space-between;align-items:center}.reward-info{font-size:1.1rem;color:#ffd700}.claim-btn{background:#ff9800!important;color:#fff!important;border-color:#e65100!important;padding:4px 12px!important;font-size:1rem!important;animation:pulse 1s infinite alternate}.claim-btn:disabled{background:#555!important;border-color:#333!important;animation:none;opacity:.5}.golden-glint{position:relative;overflow:hidden}.golden-glint:after{content:"";position:absolute;top:-100%;left:-100%;width:300%;height:300%;background:linear-gradient(45deg,transparent 45%,rgba(255,255,255,.8) 50%,transparent 55%);animation:glintMove 3s infinite}@keyframes glintMove{0%{transform:translate(-20%,-20%)}20%{transform:translate(20%,20%)}to{transform:translate(20%,20%)}}@media (max-width:768px){.screen{padding:clamp(1rem,4vw,2rem);border:3px solid var(--wood-dark);max-width:95vw;max-height:95vh}.menu-buttons{gap:clamp(10px,2vw,15px);margin-bottom:1.5rem}.shop-tabs{flex-wrap:wrap;gap:clamp(5px,2vw,10px);margin-bottom:15px}#quick-items-mobile{top:calc(100px + env(safe-area-inset-top));left:calc(15px + env(safe-area-inset-left));gap:clamp(10px,2vw,15px)}.quick-btn{width:clamp(45px,10vw,55px);height:clamp(45px,10vw,55px)}.hud-item{font-size:clamp(.9rem,2.5vw,1.2rem)}.wallet-hud{margin-top:8px}}@media (max-width:480px){.main-title{font-size:clamp(2rem,10vw,4rem);margin-bottom:.5rem;letter-spacing:1px}h1{font-size:clamp(1.5rem,5vw,3rem)}.screen{padding:clamp(.75rem,3vw,1.5rem);border:2px solid var(--wood-dark);max-width:100vw;max-height:100vh;border-radius:0}p{font-size:clamp(.9rem,2.5vw,1.2rem);margin-bottom:1.5rem}button{padding:clamp(8px,2vw,15px) clamp(12px,3vw,20px);font-size:clamp(.9rem,2vw,1.3rem);border:2px solid var(--gold)}.menu-buttons{gap:clamp(8px,2vw,12px);margin-bottom:1rem}.menu-buttons button{width:clamp(120px,90vw,200px);padding:8px 15px}.item-btn{flex:0.5 1;min-width:80px;min-height:70px;padding:clamp(8px,2vw,15px);font-size:clamp(.7rem,2vw,1rem)}.shop-items{gap:clamp(8px,2vw,12px)}.start-gold-display{padding:clamp(4px,1.5vw,10px) clamp(8px,2vw,15px);font-size:clamp(.85rem,2.5vw,1.3rem)}.price{font-size:clamp(.8rem,2vw,1rem);margin-top:3px}.balance{font-size:clamp(1rem,3vw,1.5rem)}.tab-btn{font-size:clamp(.8rem,2vw,1.1rem);padding:clamp(4px,1vw,10px) clamp(8px,2vw,12px)}#quick-items-mobile{top:calc(80px + env(safe-area-inset-top));left:calc(10px + env(safe-area-inset-left));gap:clamp(8px,1.5vw,12px)}.quick-btn{width:clamp(40px,9vw,50px);height:clamp(40px,9vw,50px);font-size:clamp(.8rem,2vw,1.2rem)}.quick-btn .count{font-size:clamp(.6rem,1.5vw,.8rem)}.mobile-jump-btn{width:clamp(70px,16vw,90px);height:clamp(70px,16vw,90px);font-size:clamp(.7rem,2vw,1rem);bottom:calc(15px + env(safe-area-inset-bottom));right:calc(15px + env(safe-area-inset-right))}.mobile-bag-btn{font-size:clamp(1.2rem,3vw,1.8rem);top:calc(80px + env(safe-area-inset-top));right:calc(15px + env(safe-area-inset-right));bottom:auto}#bag-btn,.mobile-bag-btn{width:clamp(45px,10vw,55px);height:clamp(45px,10vw,55px)}#bag-btn{font-size:clamp(1.2rem,3vw,2rem)}#gold-display{top:calc(15px + env(safe-area-inset-top));left:calc(15px + env(safe-area-inset-left));font-size:clamp(.8rem,2.5vw,1.1rem)}.hud-item{margin-bottom:6px;font-size:clamp(.8rem,2.5vw,1rem)}.coin-icon,.jade-icon{width:clamp(14px,3vw,18px);height:clamp(14px,3vw,18px);margin-right:clamp(4px,1vw,6px);border:1px solid #999}.shop-tabs{flex-direction:column;gap:clamp(6px,1.5vw,10px)}.tab-btn{width:100%}.item-count{top:-8px;right:-8px;padding:1px 6px;font-size:clamp(.7rem,1.5vw,.9rem);border:1px solid white}}@media (max-width:360px){.main-title{font-size:clamp(1.8rem,8vw,3rem)}.screen{max-width:100vw;max-height:100vh}button{min-height:40px;min-width:40px;font-size:clamp(.8rem,1.8vw,1rem)}.menu-buttons button{width:clamp(110px,85vw,150px)}.item-btn{min-width:70px;min-height:60px;font-size:clamp(.65rem,1.8vw,.85rem)}}@media (max-height:500px) and (orientation:landscape){.screen{max-height:95vh;overflow-y:auto;-webkit-overflow-scrolling:touch}h1{margin-bottom:.3rem}p{font-size:clamp(.9rem,2vw,1.2rem)}.menu-buttons,p{margin-bottom:1rem}.menu-buttons{gap:clamp(5px,1vw,8px)}.shop-items{gap:clamp(5px,1vw,10px);margin-bottom:1rem}}@media (hover:none) and (pointer:coarse){button:active{transform:translateY(-1px) scale(.98)}.mobile-bag-btn:active,.mobile-jump-btn:active,.quick-btn:active,button:active{opacity:.9}.mobile-bag-btn,.mobile-jump-btn,.quick-btn,button{-webkit-user-select:none;-moz-user-select:none;user-select:none}}